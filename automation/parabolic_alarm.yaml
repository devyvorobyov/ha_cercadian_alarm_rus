blueprint:
  name: ÐŸÐ°Ñ€Ð°Ð±Ð¾Ð»Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±ÑƒÐ´Ð¸Ð»ÑŒÐ½Ð¸Ðº
  description: Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ ÑÐ²ÐµÑ‚ Ñ Ð¿Ð»Ð°Ð²Ð½Ñ‹Ð¼ Ð½Ð°Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÐµÐ¼ ÑÑ€ÐºÐ¾ÑÑ‚Ð¸ Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð°Ñ‡Ð°Ð»Ð°, Ñ‚Ð¸Ð¿Ð° Ð´Ð½Ñ (Ð±ÑƒÐ´Ð½Ð¸Ð¹/Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð¹) Ð¸ Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ñ Ð´Ð¾Ð¼Ð°. Ð˜Ð¼Ð¸Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ ÐµÑÑ‚ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð²Ð¾ÑÑ…Ð¾Ð´ ÑÐ¾Ð»Ð½Ñ†Ð° Ð´Ð»Ñ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð±ÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ.
  domain: automation
  input:
    pre_action:
      name: "ðŸŽ® Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼"
      description: Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ´ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸ÐµÐ¼ ÑÐ²ÐµÑ‚Ð°
      default: []
      selector:
        action: {}
    conditions:
      name: Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ
      description: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ²Ð¾Ð¸ ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸. Ð’ÑÐµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒÑÑ, ÐµÑÐ»Ð¸ Ð²Ñ‹ Ð½Ðµ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚Ðµ ÑÐ²Ð¾Ð¹ Ð±Ð»Ð¾Ðº OR
      default: []
      selector:
        condition: {}
    use_separate_weekend_time:
      name: "ðŸ“… Ð Ð°Ð·Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ…"
      description: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð½ÐµÐ¹
      default: false
      selector:
        boolean: {}
    alarm_start_time_weekday:
      name: "ðŸ•’ Ð’Ñ€ÐµÐ¼Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° (Ð±ÑƒÐ´Ð½Ð¸)"
      description: Ð’Ñ€ÐµÐ¼Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð±ÑƒÐ´Ð¸Ð»ÑŒÐ½Ð¸ÐºÐ° Ð´Ð»Ñ Ð±ÑƒÐ´Ð½Ð¸Ñ… Ð´Ð½ÐµÐ¹ (Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº-Ð¿ÑÑ‚Ð½Ð¸Ñ†Ð°)
      selector:
        entity:
          filter:
          - domain:
            - input_datetime
          - domain:
            - sensor
            device_class:
            - timestamp
          multiple: false
    alarm_start_time_weekend:
      name: "ðŸ• Ð’Ñ€ÐµÐ¼Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° (Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ)"
      description: Ð’Ñ€ÐµÐ¼Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð±ÑƒÐ´Ð¸Ð»ÑŒÐ½Ð¸ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð½ÐµÐ¹ (ÑÑƒÐ±Ð±Ð¾Ñ‚Ð°-Ð²Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ). Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð° Ð¾Ð¿Ñ†Ð¸Ñ "Ð Ð°Ð·Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ…"
      default: ""
      selector:
        entity:
          filter:
          - domain:
            - input_datetime
          - domain:
            - sensor
            device_class:
            - timestamp
          multiple: false
    offset_from_start_time:
      name: "ðŸ Ð¡Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð°Ñ‡Ð°Ð»Ð°"
      description: Ð¡ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð°Ñ‡Ð°Ð»Ð°. Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐµÐºÑƒÐ½Ð´Ñ‹ Ð¸Ð»Ð¸ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð§Ð§:ÐœÐœ:Ð¡Ð¡ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, "-00:05:00" Ð´Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‚Ð° Ð·Ð° 5 Ð¼Ð¸Ð½ÑƒÑ‚ Ð´Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð°Ñ‡Ð°Ð»Ð°). ÐŸÐ¾Ð»ÐµÐ·Ð½Ð¾ Ð´Ð»Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ð° ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð±ÑƒÐ´Ð¸Ð»ÑŒÐ½Ð¸ÐºÐ°.
      default: -00:00:00
      selector:
        text:
          multiline: false
    alarm_script:
      name: "ðŸ“„ Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð±ÑƒÐ´Ð¸Ð»ÑŒÐ½Ð¸ÐºÐ°"
      description: Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ ÑÐ²ÐµÑ‚Ð°
      selector:
        entity:
          filter:
          - domain:
            - script
          multiple: false
    target_light:
      name: Ð¦ÐµÐ»ÐµÐ²Ð¾Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº ÑÐ²ÐµÑ‚Ð°
      description: ÐžÐ´Ð¸Ð½ ÑÐ²ÐµÑ‚Ð¸Ð»ÑŒÐ½Ð¸Ðº Ð¸Ð»Ð¸ Ð³Ñ€ÑƒÐ¿Ð¿Ð° ÑÐ²ÐµÑ‚Ð¸Ð»ÑŒÐ½Ð¸ÐºÐ¾Ð²
      selector:
        entity:
          filter:
          - domain:
            - light
          multiple: false
    light_timeout:
      name: "â±ï¸ Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ"
      description: Ð¡Ð²ÐµÑ‚ Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ñ†Ð¸ÐºÐ»Ð°. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ 0, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ²ÐµÑ‚ Ð²ÐºÐ»ÑŽÑ‡Ñ‘Ð½Ð½Ñ‹Ð¼
      default: 10
      selector:
        number:
          min: 0.0
          max: 60.0
          step: 1.0
          mode: slider
          unit_of_measurement: Ð¼Ð¸Ð½
    steps_per_minute:
      name: "ðŸƒâ€â™‚ï¸ Ð¨Ð°Ð³Ð¾Ð² Ð² Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ"
      description: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð° Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÑ€ÐºÐ¾ÑÑ‚Ð¸ Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ Ð½Ð° ÐºÐ°Ð¶Ð´Ð¾Ð¼ ÑˆÐ°Ð³Ðµ
      default: 12
      selector:
        number:
          min: 1.0
          max: 60.0
          step: 1.0
          mode: slider
    start_brightness:
      name: "â­ï¸ ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ€ÐºÐ¾ÑÑ‚ÑŒ"
      description: ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÑ€ÐºÐ¾ÑÑ‚Ð¸
      selector:
        number:
          min: 1.0
          max: 100.0
          step: 1.0
          mode: slider
          unit_of_measurement: "%"
      default: 1.0
    start_kelvin_temp:
      name: "â˜€ï¸ ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð° (ÐšÐµÐ»ÑŒÐ²Ð¸Ð½Ñ‹)"
      description: ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ (Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¹ ÑÐ²ÐµÑ‚) Ð´Ð»Ñ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        color_temp:
          unit: kelvin
      default: 2500
    target_kelvin_1:
      name: "â˜€ï¸ Ð¦ÐµÐ»ÐµÐ²Ð°Ñ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð° 1"
      description: Ð¦ÐµÐ»ÐµÐ²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ (Ñ…Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ð¹ ÑÐ²ÐµÑ‚) Ðº ÐºÐ¾Ð½Ñ†Ñƒ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        color_temp:
          unit: kelvin
      default: 3000
    max_brightness_1:
      name: "â­ï¸ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ€ÐºÐ¾ÑÑ‚ÑŒ 1"
      description: ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÑ€ÐºÐ¾ÑÑ‚Ð¸ Ð´Ð»Ñ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        number:
          min: 1.0
          max: 100.0
          step: 1.0
          mode: slider
          unit_of_measurement: "%"
      default: 10
    alarm_length_1:
      name: "â° Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ñ†Ð¸ÐºÐ»Ð° 1"
      description: Ð’Ñ€ÐµÐ¼Ñ Ð¾Ñ‚ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        number:
          min: 1.0
          max: 60.0
          step: 1.0
          mode: slider
          unit_of_measurement: Ð¼Ð¸Ð½
      default: 10
    target_kelvin_2:
      name: "ðŸŒ— Ð¦ÐµÐ»ÐµÐ²Ð°Ñ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð° 2"
      description: Ð¦ÐµÐ»ÐµÐ²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ Ð´Ð»Ñ Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        color_temp:
          unit: kelvin
      default: 4000
    max_brightness_2:
      name: "â­ï¸ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ€ÐºÐ¾ÑÑ‚ÑŒ 2"
      description: ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÑ€ÐºÐ¾ÑÑ‚Ð¸ Ð´Ð»Ñ Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        number:
          min: 1.0
          max: 100.0
          step: 1.0
          mode: slider
          unit_of_measurement: "%"
      default: 50
    alarm_length_2:
      name: "â° Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ñ†Ð¸ÐºÐ»Ð° 2"
      description: Ð’Ñ€ÐµÐ¼Ñ Ð¾Ñ‚ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        number:
          min: 1.0
          max: 60.0
          step: 1.0
          mode: slider
          unit_of_measurement: Ð¼Ð¸Ð½
      default: 10
    target_kelvin_3:
      name: "ðŸŒ• Ð¦ÐµÐ»ÐµÐ²Ð°Ñ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð° 3"
      description: Ð¦ÐµÐ»ÐµÐ²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ Ð´Ð»Ñ Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        color_temp:
          unit: kelvin
      default: 6500
    max_brightness_3:
      name: "â­ï¸ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ€ÐºÐ¾ÑÑ‚ÑŒ 3"
      description: ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÑ€ÐºÐ¾ÑÑ‚Ð¸ Ð´Ð»Ñ Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ³Ð¾ Ð¸ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        number:
          min: 1.0
          max: 100.0
          step: 1.0
          mode: slider
          unit_of_measurement: "%"
      default: 100
    alarm_length_3:
      name: "â° Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ñ†Ð¸ÐºÐ»Ð° 3"
      description: Ð’Ñ€ÐµÐ¼Ñ Ð¾Ñ‚ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ³Ð¾ Ñ†Ð¸ÐºÐ»Ð°
      selector:
        number:
          min: 1.0
          max: 60.0
          step: 1.0
          mode: slider
          unit_of_measurement: Ð¼Ð¸Ð½
      default: 5
    post_action:
      name: "ðŸŽ® Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ"
      description: Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
      default: []
      selector:
        action: {}
  source_url: https://github.com/devyvorobyov/ha_cercadian_alarm_rus/blob/main/automation/parabolic_alarm.yaml

variables:
  use_weekend: !input use_separate_weekend_time
  weekday_time: !input alarm_start_time_weekday
  weekend_time: !input alarm_start_time_weekend
  is_weekend: "{{ now().weekday() in [5, 6] }}"
  selected_time: >
    {% if use_weekend and is_weekend and weekend_time != "" %}
      {{ weekend_time }}
    {% else %}
      {{ weekday_time }}
    {% endif %}

trigger:
  - trigger: time
    at: !input alarm_start_time_weekday
    id: weekday_trigger
    offset: !input offset_from_start_time
  - trigger: time
    at: !input alarm_start_time_weekend
    id: weekend_trigger
    offset: !input offset_from_start_time

condition:
  - condition: and
    conditions:
      - condition: template
        value_template: >
          {% set use_weekend = use_separate_weekend_time %}
          {% set is_weekend = now().weekday() in [5, 6] %}
          {% if use_weekend %}
            {{ (trigger.id == 'weekday_trigger' and not is_weekend) or 
               (trigger.id == 'weekend_trigger' and is_weekend) }}
          {% else %}
            {{ trigger.id == 'weekday_trigger' }}
          {% endif %}
      - condition: and
        conditions: !input conditions

action:
  - choose:
    - conditions: []
      sequence: !input pre_action
  - action: light.turn_on
    data:
      color_temp_kelvin: !input start_kelvin_temp
      brightness_pct: !input start_brightness
      entity_id: !input target_light
  - delay:
      seconds: 5
  - action: !input alarm_script
    data:
      target_kelvin: !input target_kelvin_1
      start_kelvin: !input start_kelvin_temp
      max_brightness_pct: !input max_brightness_1
      alarm_length: !input alarm_length_1
      steps_per_minute: !input steps_per_minute
      light_timeout: 0
      target_light: !input target_light
  - if:
    - condition: state
      state: 'on'
      entity_id: !input target_light
    then:
    - action: !input alarm_script
      data:
        target_kelvin: !input target_kelvin_2
        start_kelvin: !input target_kelvin_1
        max_brightness_pct: !input max_brightness_2
        alarm_length: !input alarm_length_2
        steps_per_minute: !input steps_per_minute
        light_timeout: 0
        target_light: !input target_light
  - if:
    - condition: state
      state: 'on'
      entity_id: !input target_light
    then:
    - action: !input alarm_script
      data:
        target_kelvin: !input target_kelvin_3
        start_kelvin: !input target_kelvin_2
        max_brightness_pct: !input max_brightness_3
        alarm_length: !input alarm_length_3
        steps_per_minute: !input steps_per_minute
        light_timeout: !input light_timeout
        target_light: !input target_light
    - choose:
      - conditions: []
        sequence: !input post_action

mode: single